var p=Object.defineProperty;var m=(r,t,e)=>t in r?p(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var s=(r,t,e)=>(m(r,typeof t!="symbol"?t+"":t,e),e);import"./modulepreload-polyfill-3cfb730f.js";class i{constructor(){s(this,"subscribers",[])}attach(t){this.subscribers.includes(t)||this.subscribers.push(t)}detach(t){const e=this.subscribers.indexOf(t);e!==-1&&this.subscribers.splice(e,1)}notify(t){for(const e of this.subscribers)e.update(t)}}class b extends i{constructor(e){super();s(this,"playersCount");s(this,"currentPlayerIndex",0);this.playersCount=e}next(){this.notify(this.currentPlayerIndex),this.currentPlayerIndex=(this.currentPlayerIndex+1)%this.playersCount}}class x{constructor(t,e){s(this,"playerIndex");s(this,"diceResult");this.playerIndex=t,this.diceResult=e}}class f extends i{constructor(e){super();s(this,"maxSides");this.maxSides=e}getRandomNumber(e){return Math.floor(Math.random()*e)}update(e){const y=new x(e,this.getRandomNumber(this.maxSides));this.notify(y)}}class a extends i{constructor(e){super();s(this,"diceResults",[]);s(this,"diceSum",0);s(this,"winStatus",!1);s(this,"winNumber",21);s(this,"playerIndex");this.playerIndex=e}update(e){this.playerIndex===e.playerIndex&&(this.diceResults.push(e.diceResult),this.diceSum+=e.diceResult,this.diceSum>=this.winNumber&&(this.winStatus=!0),this.notify(this))}}class u{constructor(t){s(this,"element");this.element=t}update(t){const e=this.element;e.innerHTML+=`${t.diceResults.at(-1)} `,t.winStatus&&(e.style.backgroundColor="pink")}}class S extends i{constructor(){super(...arguments);s(this,"allDiceNumbers",[])}update(e){this.allDiceNumbers.push(e.diceResult),this.notify(this.allDiceNumbers)}}class w{constructor(t){s(this,"element");this.element=t}update(t){const e=this.element;e.innerHTML+=`${t.at(-1)} `}}const l=new b(2),n=new f(7);l.attach(n);const o=new a(0),d=new a(1);n.attach(o);n.attach(d);const R=new u(document.querySelector(".display-0"));o.attach(R);const I=new u(document.querySelector(".display-1"));d.attach(I);const h=new S;n.attach(h);const D=new w(document.querySelector(".accumulator-display"));h.attach(D);const c=document.querySelector(".roll-dice-button");c==null||c.addEventListener("click",()=>{l.next()});
