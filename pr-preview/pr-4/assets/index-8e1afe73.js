var h=Object.defineProperty;var y=(t,s,e)=>s in t?h(t,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[s]=e;var i=(t,s,e)=>(y(t,typeof s!="symbol"?s+"":s,e),e);import"./modulepreload-polyfill-3cfb730f.js";class r{constructor(){i(this,"subscribers",[])}subscribe(s){this.subscribers.includes(s)||this.subscribers.push(s)}unsubscribe(s){const e=this.subscribers.indexOf(s);e!==-1&&this.subscribers.splice(e,1)}notify(s){for(const e of this.subscribers)e.update(s)}}class p extends r{constructor(e){super();i(this,"currentPlayerIndex",0);this.playersCount=e}next(){this.notify(this.currentPlayerIndex),this.currentPlayerIndex=(this.currentPlayerIndex+1)%this.playersCount}}class m extends r{constructor(s){super(),this.maxSides=s}getRandomNumber(s){return Math.floor(Math.random()*s)}update(s){this.notify({playerIndex:s,diceResult:this.getRandomNumber(this.maxSides)})}}class u extends r{constructor(e){super();i(this,"diceResults",[]);i(this,"diceSum",0);i(this,"winStatus",!1);i(this,"winNumber",21);this.playerIndex=e}update(e){this.playerIndex===e.playerIndex&&(this.diceResults.push(e.diceResult),this.diceSum+=e.diceResult,this.winStatus=this.diceSum>=this.winNumber,this.notify(this))}}class a{constructor(s){this.element=s}update(s){const e=this.element;e.innerHTML+=`${s.diceResults.at(-1)} `,s.winStatus&&e.classList.add("show-winner")}}class x extends r{constructor(){super(...arguments);i(this,"allDiceNumbers",[])}update(e){this.allDiceNumbers.push(e.diceResult),this.notify(this.allDiceNumbers)}}class w{constructor(s){this.element=s}update(s){const e=this.element;e.innerHTML+=`${s.at(-1)} `}}const l=new p(2),n=new m(7);l.subscribe(n);const o=new u(0),d=new u(1);n.subscribe(o);n.subscribe(d);const f=new a(document.querySelector(".display-0"));o.subscribe(f);const S=new a(document.querySelector(".display-1"));d.subscribe(S);const b=new x;n.subscribe(b);const R=new w(document.querySelector(".accumulator-display"));b.subscribe(R);const c=document.querySelector(".roll-dice-button");c==null||c.addEventListener("click",()=>{l.next()});
